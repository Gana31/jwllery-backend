<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <style>
    @page { size: A4; margin: 5px; }
    body { font-family: Arial, sans-serif; margin: 0; padding: 4px; font-size: 12px; border: 1px solid #000; }
    .certificate { page-break-after: always; break-after: page; display: block; }
    @media print {
      .certificate { page-break-inside: avoid; page-break-after: always; break-after: page; }
    }
    .certificate:last-child { page-break-after: avoid; }
    .header { text-align: center; }
    .bank-jeweller-row { padding: 8px; display: flex; justify-content: space-between; }
    .bank-section, .certificate-title, .jeweller-section { flex: 1; text-align: center; }
    .jeweller-section { text-align: right; }
    .customer-section { border: 1px solid #000; padding: 8px; }
    .customer-row { display: flex; justify-content: space-between; }
    table { width: 100%; border-collapse: collapse; }
    th, td { border: 1px solid #000; padding: 4px; text-align: center; font-size: 9px; }
    .main-value { display: flex; }
    .value-section { width: 70%; border: 1px solid #000; }
    .iamge-value { width: 30%; }
    .iamge-photo { width: 100%; }
    .value-row { display: flex; justify-content: space-between; padding: 5px; border-bottom: 0.5px solid #000; }
    .certification-section { padding: 2px; font-size: 10px; text-align: justify; line-height: 1.1; word-wrap: break-word; }
    .acid-test { text-align: right; margin-top: 15px; }
    .page-header { text-align: center; margin-bottom: 15px; padding: 10px; border-bottom: 1px solid #000; }
    .bold { font-weight: bold; }
    .logo-placeholder { width: 60px; height: 60px; background-color: #e0e0e0; display: inline-block; text-align: center; line-height: 60px; margin-bottom: 5px; }
    .emblem { width: 80px; height: 80px; background-color: #ff6b6b; border-radius: 50%; display: inline-block; text-align: center; line-height: 80px; font-size: 30px; margin-bottom: 5px; }
  </style>
</head>
<body>
<%
  const ITEMS_PER_PAGE = 10;
  const pages = [];
  for (let i = 0; i < goldItems.length; i += ITEMS_PER_PAGE) {
    pages.push(goldItems.slice(i, i + ITEMS_PER_PAGE));
  }
%>

<% pages.forEach((pageOrnaments, pageIndex) => { %>
  <div class="certificate">
    <% if (pageIndex === 0) { %>
     
      <div class="bank-jeweller-row">
        <div class="bank-section">
          <div class="logo-placeholder">UBI</div>
          <div class="bold">Union Bank Of India</div>
          <div><%= selectedBranch %></div>
        </div>
        <div class="certificate-title">
          <div class="emblem">üèõÔ∏è</div>
          <div class="bold">Certificate of Goldsmith</div>
          <div>Details of Gold Ornaments / Jewellery</div>
        </div>
        <div class="jeweller-section">
          <div class="bold"><%= jewellerName %></div>
          <div style="font-style: italic;">Goldsmith and Valuer</div>
          <div><%= jewellerAddress %></div>
          <div> <%= jewellerMobile || "" %></div>
          <div><%= jewellerEmail %></div>
          <div><%= jewellerAccount %></div>
          <div><%= jewellerMembership %></div>
        </div>
      </div>

      <div class="customer-section">
        <div class="customer-row">
          <span>Mr./Mrs:- <%= customerDetails.customerName %></span>
          <span>Cust. ID: <%= customerDetails.customerId || "" %></span>
        </div>
        <div class="customer-row">
          <span>Address:- <%= customerDetails.address %></span>
          <span>Bag No. : <%= customerDetails.begNo || customerDetails.pouchNo || "" %></span>
        </div>
        <div class="customer-row">
          <span>Mobile No.- <%= customerDetails.phone %></span>
          <span>A/c No. : <%= customerDetails.accountNumber %></span>
        </div>
      </div>
    <% } else { %>
      <div class="page-header">
        <div class="bold">Page <%= pageIndex + 1 %></div>
        <div style="font-style: italic;">Certificate of Goldsmith (Continued)</div>
      </div>
    <% } %>

    <table>
      <thead>
        <tr>
          <th>Sr. No</th><th>Description of Gold Ornaments</th><th>No Of Units</th><th>Gross Weight in Grams</th><th>Net Weight</th><th>Purity in Carat</th><th>22ct Equivalent Weight</th><th>Rate per Gram</th>
        </tr>
        <tr><th>A</th><th>B</th><th>C</th><th>D</th><th>E</th><th>F</th><th>G</th><th>H</th></tr>
      </thead>
      <tbody>
        <% ornamentPages.forEach((ornament, i) => { %>
          <tr>
            <td><%= ornament.srNo || (pageIndex * ITEMS_PER_PAGE + i + 1) %></td>
            <td><%= ornament.description %></td>
            <td><%= ornament.noOfUnits %></td>
            <td><%= ornament.grossWeightGrams %></td>
            <td><%= ornament.netWeightGrams %></td>
            <td><%= ornament.purityCarat %></td>
            <td><%= ornament.equivalentWeight22Carat %></td>
            <td><%= ornament.ratePerGram %></td>
          </tr>
        <% }) %>

        <% if (pageIndex === pages.length - 1) { %>
          <% for (let i = pageOrnaments.length; i < ITEMS_PER_PAGE; i++) { %>
            <tr><td colspan="8">&nbsp;</td></tr>
          <% } %>
          <tr style="background-color: #f0f0f0; font-weight: bold;">
            <td colspan="2">TOTAL</td>
            <td><%= totalUnits %></td>
            <td><%= totalGrossWeight %></td>
            <td><%= totalNetWeight %></td>
            <td></td>
            <td><%= totalNetWeight %></td>
            <td>‚Çπ <%= totalValue %></td>
          </tr>
        <% } %>
      </tbody>
    </table>

    <% if (pageIndex === pages.length - 1) { %>
      <div class="main-value">
        <div class="value-section">
          <div class="value-row"><span class="bold">Value of Gold as per Market Rate</span></div>
          <div class="value-row">
            <span>Total wt. in 22ct: <%= totalNetWeight %>g @ ‚Çπ <%= totalNetWeight %>/g</span>
            <span>‚Çπ <%= totalValue %></span>
          </div>
          <div class="value-row"><span>Minimum of Above two</span></div>
          <div class="value-row"><span>Less Margin (35%)</span></div>
          <div class="value-row">
            <span class="bold">Eligible Amount</span>
            <span class="bold">‚Çπ <%= totalValue %></span>
          </div>
          <div class="value-row"><span>Loan Requested by Borrower</span></div>
          <div class="value-row">
            <span>Loan to be sanctioned</span>
            <span>‚Çπ -</span>
          </div>
        </div>
        <div class="iamge-value">
          <img class="iamge-photo" src="<%= jewelryImage %>" alt="Jewellery Photo" />
        </div>
      </div>

      <div class="certification-section">
        <p>I Mr. <span class="bold"><%= customerName %></span> son of Mr. <span class="bold"><%= customerName %></span> aged about <span class="bold"><%= customerName %></span> Years residing at <span class="bold"><%= address %></span> hereby certify that I have checked and weighted the above mentioned gold ornaments and the Net Weight of gold therein is</p>
        <p><span class="bold"><%= totalValue %></span> Grams of <span class="bold">22</span> carat purity. I hereby certify that the Bank may</p>
        <p>safely grant a loan of <span class="bold">‚Çπ 0.00</span> /- against pledge of the said the gold ornaments.</p>
        <p>I am ready to purchase these gold ornaments at market rate as and when demanded by the Bank.</p>
      </div>

      <div class="acid-test">
        <span>Acid Test Done ‚úì <%= date %> </span>
      </div>
    <% } %>
  </div>
<% }) %>
</body>
</html>
